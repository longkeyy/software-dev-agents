name: analysis-design
display_name: "分析设计阶段"
description: "需求分析、系统设计、技术选型"

# 工作流程阶段定义
stage:
  type: "analysis-design"
  sequence: 1
  duration: "2-4周"

# 参与角色定义
participants:
  # 主导角色 - 核心决策和执行责任
  lead_roles:
    - department: product
      agents: 
        - business-analyst    # 业务需求分析
        - product-manager     # 产品规划设计
    
    - department: engineering.architecture
      agents: 
        - system-architect    # 系统架构设计
        - data-architect      # 数据架构设计

  # 支持角色 - 专业建议和协作支持
  support_roles:
    - department: product
      agents: 
        - ux-designer         # 用户体验设计
        - product-owner       # 敏捷需求管理
    
    - department: engineering.architecture
      agents: 
        - security-architect  # 安全架构设计
    
    - department: security
      agents: 
        - security-expert     # 安全需求评估
        - compliance-expert   # 合规要求分析

# 协作模式
collaboration_patterns:
  - name: "需求到设计"
    flow: "business-analyst → product-manager → system-architect"
    description: "业务需求分析 → 产品功能设计 → 系统架构设计"
  
  - name: "用户体验设计"
    flow: "product-manager → ux-designer → system-architect"
    description: "产品功能 → 交互设计 → 前端架构"
  
  - name: "数据架构设计"
    flow: "business-analyst → data-architect → system-architect"
    description: "数据需求 → 数据建模 → 系统集成"
  
  - name: "安全合规评估"
    flow: "system-architect → security-architect → compliance-expert"
    description: "系统设计 → 安全架构 → 合规审查"

# 主要产出物
deliverables:
  requirements:
    - "业务需求文档(BRD)"
    - "产品需求文档(PRD)"
    - "用户故事和验收标准"
    - "业务流程图"
  
  design:
    - "产品原型设计"
    - "用户界面设计"
    - "系统架构设计图"
    - "数据模型设计"
    - "API接口设计"
  
  technical:
    - "技术选型报告"
    - "系统部署架构"
    - "安全设计方案"
    - "性能设计目标"
  
  planning:
    - "项目实施计划"
    - "资源需求评估"
    - "风险评估报告"
    - "里程碑定义"

# 质量检查点
quality_gates:
  - name: "需求确认"
    criteria:
      - "业务需求完整性和一致性"
      - "用户故事可测试性"
      - "非功能性需求明确性"
    participants: ["business-analyst", "product-manager", "product-owner"]
  
  - name: "设计审查"
    criteria:
      - "系统架构合理性和可扩展性"
      - "数据模型完整性和一致性"
      - "接口设计标准化"
    participants: ["system-architect", "data-architect", "security-architect"]
  
  - name: "技术评估"
    criteria:
      - "技术选型适合性"
      - "性能目标可达成性"
      - "安全合规满足性"
    participants: ["system-architect", "security-expert", "compliance-expert"]

# 成功标准
success_criteria:
  business:
    - "业务需求获得利益相关者确认"
    - "产品功能符合用户期望"
    - "商业价值和投资回报明确"
  
  technical:
    - "架构设计通过技术委员会审查"
    - "技术选型得到团队共识"
    - "安全合规要求完整覆盖"
  
  project:
    - "项目计划获得管理层批准"
    - "资源配置满足实施需求"
    - "风险识别和应对措施完备"

# 常见风险和应对
risk_mitigation:
  - risk: "需求不明确或变更频繁"
    mitigation: "加强与业务方沟通，建立需求变更控制流程"
    responsible: ["business-analyst", "product-manager"]
  
  - risk: "技术架构复杂度过高"
    mitigation: "采用分阶段实施，优先MVP功能"
    responsible: ["system-architect", "product-manager"]
  
  - risk: "安全合规要求遗漏"
    mitigation: "早期引入安全和合规专家评审"
    responsible: ["security-architect", "compliance-expert"]

# 下一阶段准备
next_stage_preparation:
  - "组建开发团队"
  - "搭建开发环境"
  - "制定详细开发计划"
  - "启动敏捷开发流程"